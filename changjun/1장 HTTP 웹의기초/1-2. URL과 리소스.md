# 2. URL과 리소스

> URL은 인터넷 리소르를 가리키는 표준이름이다.

## 2-1. 인터넷의 리소스 탐색하기

- URL은 브라우저가 정보를 찾는데 필요한 리소스의 위치를 가리킨다.
- URL을 통해 사람이 HTTP 및 다른 프로토콜을 통해 접근할 수 있다.
- URL은 URI의 부분집합이다.
- URL을 사용하면 더 일반화된 개념의 리소스 식별자로 사용함
- `스킴://서버위치/경로` 구조로 이루어져있음

## 2-2. URL 문법

- 리소스들은 다른 스킴을 통해 접근할 수 있으며 문법은 스킴에 따라서 달라진다.
- 대부분의 URL 스킴의 문법은 형태와 문법 면에서 매우 유사하다.
- <스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>

### 1. 스킴

- 어떤 프로토콜을 사용할 것인지
- 대소문자를 구분하지 않음

### 2. 호스트와 포트

- 호스트 컴포넌트는 접근하려고 하는 리소스를 가지고 있는 인터넷상의 호스트 장비를 가리킨다.
- 포트 컴포넌트는 서버가 열어놓은 네트워크 포트를 가리킨다. (기본포트는 80)

### 3. 사용자 이름과 비밀번호

- 많은 서버가 접근을 허용하기 전 사용자 이름과 비밀번호를 요구함
- 사용자 이름과 비밀번호를 요구하는 URL 스킴을 사용한다면, 그 값들이 삽입되어 있지 않을 경우 기본 사용자 이름과 비밀번호 값을 넣어준다.

### 4. 경로

- URL의 경로 컴포넌트는 리소스가 서버의 어디에 있는지 알려준다.

### 5. 파라미터

- URL의 파라미터 컴포넌트는, 애플리케이션이 서버에 정확한 요청을 하기 위해 필요한 입력 파라미터를 받는데 사용한다.
- 이름/값 쌍의 리스트로 URL 나무지 부분들로 부터 ';' 문자로 구분하여 URL에 기술한다.
- ftp://prep.ai.mit.edu/pub/gnu;type=d

### 6. 질의 문자열

- 요청받을 리소스 형식의 범위를 좁히기 위해서 쓰인다.
- 스킴에서 애플리케이션 파라미터를 전달하는데 쓰인다.
- URL 끝에 "?"로 구분한다.

### 7. 프래그먼트

- 리소스의 조각이나 일부분을 가리키는 이름이다.
- URL은 HTML 문서에 있는 특정 이미지나 일부분을 가리킬 수 있다.
- "#" 으로 구분한다.
- 브라우저는 서버로부터 전체 리소스를 내려받은 후, 프래그먼트를 사용하여 사용자가 보고자 하는 리소스의 일부분을 보여준다.

## 2-3. 단축 URL

### 1. 상대 URL

- 절대 URL: 리소스에 접근하는데 모든 정보를 가지고 있다.
- 상대 URL: 리소스에 접근하는데 모든 정보를 가지고 있지 않다.
- 상대 URL로 리소스에 접근하기 위해서는 base URL을 사용해야 한다.
- 상대 URL은 URL을 짧게 표기하는 방식이다.

### 2. URL 확장

- 호스트명 확장
- 히스토리 확장

## 2-4. 안전하지 않은 문자

URL 설계자들은 모든 인터넷 프로토콜로 URL이 전송 될 수 있기를 바랐고, 이와 함께 가독성이 있길 바랐다. 따라서 출력되지 않거나 보이지 않는 문자를 이메일 프로그램에서 사용할 수 있다고 해서, 그 문자들이 변환될 수 있다고 해서, 그리고 변환 될 수 있다고 하더라도, URL에서 그 문자들을 사용하는 것은 금지 되어있다.

- 모든 프로토콜이 데이터를 전송하기 위해 서로 다른 장치를 가지고 있기 때문에, 어떤 인터넷 프로토콜을 통해서든 안전하게 전송될 수 있도록 URL을 설계해야 했다.
- 안전한 전송이란, 정보가 유실될 위험 없이 전송될 수 있는것을 의미한다.
- URL은 상대적으로 작고 일반적으로 안전한 알파벳 문자만 포함하도록 허락한다.
- 이스케이프 기능은 안전하지 않은 문자를 안전한 문자로 인코딩할 수 있게 한다.

### 1. URL 문자 집합

- 역사적으로 많은 컴퓨터들이 US-ASCII 문자 집합을 사용해왔다.
- 이것은 만들어진 지 오래된 문자 집합이기 때문에, 적은 수의 문자만을 포함하고 있으므로, URL 설계자들은 이스케이프 문자열을 쓸 수 있게 설계하였다.
- 이스케이프 문자열은 US-ASCII에서 사용이 금지된 문자들로, 특정 문자나 데이터를 인코딩할 수 있게 함으로써 이동성과 완성도를 높였다.

### 2. 인코딩 체게

- 안전한 문자 집합을 이용하는 경우 표현의 한게를 넘기 위해 URL에 있는 안전하지 않은 문자들을 표현할 수 있는 인코딩 방식이 고안되었다.
- 안전하지 않은 문자는 퍼센티지 기호(%)로 시작해, ASCII 코드로 표현되는 두 개의 16진수 숫자로 이루어진 이스케이프 문자로 바꾼다.

### 3. 문자 제한

- 몇몇 문자는 URL 내에서 특별한 의미로 예약되어 있다.
- 어떤 문자는 게이트웨이와 프로토콜에서 혼동되는 것으로 알려져 있어서, 사용이 꺼려지기도 했다.

### 4. 좀 더 알아보기

- 애플리케이션 개발자들이 안전하지 않은 문자를 인코딩 하지 않는것은 실수다.
- 애플리케이션은 정해진 방식대로 구현해야 한다.
- 입력받은 URL에서 어떤 문자를 인코딩해야 하는지 결정하는 데는 브라우저와 같이 사용자로부터 최초로 URL을 입력받는 애플리케이션에서 하는 것이 가장 적절하다.

## 2.5 스킴의 바다

- http
  - 사용자 이름이나 비밀번호가 없다는 것을 제외하고는, 일반 URL 포맷을 지키는 하이퍼 텍스트 전송 프로토콜 스킴이다.
- https
  - http 스킴과 거의 같다.
  - HTTP의 커넥션의 양 끝단에서 암호화하기 위해 넷스케이프에서 개발한 보안 소켓 계층(SSL)을 사용한다.
- mailto
  - mailto URL은 이메일 주소를 가리킨다.
- ftp
  - 파일 전송 프로토콜
  - URL은 FTP 서버에 있는 파일을 내려 받거나 올리고, FTP 서버의 디렉터리에 있는 콘텐츠 목록을 가져오는 데 사용할 수 있다.
- rtsp, rtspu
  - 실시간 스트리밍 프로토콜을 통해 읽을 수 있는 오디오 및 비디오와 같은 미디어 리소스 식별자.
- file
  - file 스킴은 주어진 호스트 기기에서 바로 접근할 수 있는 파일들
- news
  - 특정 문서나 뉴스 그룹에 접근하는데 사용
- telnet
  - 대화형 서비스에 접근하는데 사용

## 2-6. 미래

- URL이 특정 시점에 어떤 것이 위치한 곳을 알려준다는 것을 뜻한다. 이런 스킴의 단점은 리소스가 옮겨지면 URL을 더는 사용할 수 없고, 기존 URL이 가리키고 있던 객체를 찾을 방법이 없어진다.

- 이러한 문제를 해결하기 위해 URN이라는 새로운 개념이 생겼는데, 이것은 객체가 옮겨지더라도 항상 객체를 가리킬 수 있는 이름을 제공한다.
- URL에서 URN으로 주소 체계를 바꾸는 것은 매우 큰 작업이기 때문에 당분간은 URL 사용이 계속될 것이다.
